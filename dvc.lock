schema: '2.0'
stages:
  fetch_data_from_gcs:
    cmd: python src/dataset.py
    deps:
    - path: src/dataset.py
      hash: md5
      md5: 12c16ed4b671040e6a9e1dc8a0f6fa32
      size: 1303
    outs:
    - path: data/raw/california-housing.csv
      hash: md5
      md5: d1c47305887e2252bf1ccbd74ff159a6
      size: 1423529
  preprocess:
    cmd: python src/features.py
    deps:
    - path: data/raw/california-housing.csv
      hash: md5
      md5: d1c47305887e2252bf1ccbd74ff159a6
      size: 1423529
    - path: params.yaml
      hash: md5
      md5: 29b38b91ca1c4c4ed63bb712bc7fe829
      size: 43
    - path: src/config.py
      hash: md5
      md5: 70b27eeaae50df302999221412b9998f
      size: 360
    - path: src/features.py
      hash: md5
      md5: 1c1d7ce8375ebc7d0ce2e16994ce6666
      size: 2543
    outs:
    - path: artifacts/preprocessor
      hash: md5
      md5: 1acebd14336ee5b3bfd42d32bbad12ae.dir
      size: 3573
      nfiles: 1
    - path: data/processed
      hash: md5
      md5: 4e3c433d50799a926fa9d083b8ab57b2.dir
      size: 2312192
      nfiles: 4
  train:
    cmd: python src/modeling/train.py
    deps:
    - path: data/processed
      hash: md5
      md5: 4e3c433d50799a926fa9d083b8ab57b2.dir
      size: 2312192
      nfiles: 4
    - path: src/modeling/train.py
      hash: md5
      md5: 47c15cf0b37d39db8d7e18fd995778f5
      size: 1669
    outs:
    - path: artifacts/model
      hash: md5
      md5: 6773655b8ebb87970390ef8b8e445a5c.dir
      size: 2637
      nfiles: 2
  predict:
    cmd: python src/modeling/predict.py
    deps:
    - path: artifacts/model/model.joblib
      hash: md5
      md5: 3e758ef5a8e86bafa841ce7de6ae2f00
      size: 2575
    - path: data/processed/X_test.npy
      hash: md5
      md5: 5fe04fac3afb248e8f98036975f38d02
      size: 429440
    - path: data/processed/y_test.npy
      hash: md5
      md5: 2a11e5453c39fad8638c171affea0e1a
      size: 33152
    - path: src/modeling/predict.py
      hash: md5
      md5: c0943e180320b7c7bb326ebe8db1cdcf
      size: 1526
    outs:
    - path: artifacts/predictions/predictions.csv
      hash: md5
      md5: 7da87a9961bb54a1930d220a116faba5
      size: 112985
  posterior_analysis:
    cmd: python src/posterior_analysis.py
    deps:
    - path: artifacts/model/model.joblib
      hash: md5
      md5: 3e758ef5a8e86bafa841ce7de6ae2f00
      size: 2575
    - path: src/posterior_analysis.py
      hash: md5
      md5: 65671b3b6e1fa32fe59a59f51ada3e1a
      size: 1728
    outs:
    - path: artifacts/posterior/posterior_coeff_uncertainty.png
      hash: md5
      md5: 4d6ddef755abaf8f9f6d1161865e61fc
      size: 27486
    - path: artifacts/posterior/posterior_coefficients.csv
      hash: md5
      md5: 1f80510c9ad64fd176d2954db5721b77
      size: 302
  predict_with_uncertainty:
    cmd: python src/predict_with_uncertainty.py
    deps:
    - path: artifacts/model/model.joblib
      hash: md5
      md5: 3e758ef5a8e86bafa841ce7de6ae2f00
      size: 2575
    - path: data/processed/X_test.npy
      hash: md5
      md5: 5fe04fac3afb248e8f98036975f38d02
      size: 429440
    - path: data/processed/y_test.npy
      hash: md5
      md5: 2a11e5453c39fad8638c171affea0e1a
      size: 33152
    - path: src/predict_with_uncertainty.py
      hash: md5
      md5: b326e7427971aead1d9c422c6c57baf3
      size: 1976
    outs:
    - path: artifacts/uncertainty/prediction_uncertainty.png
      hash: md5
      md5: 9f0d9da26757a178873a2b27464b69f5
      size: 51091
    - path: artifacts/uncertainty/predictions_with_uncertainty.csv
      hash: md5
      md5: ce580ac03abf59bc6bf3e51e3013efe2
      size: 186642
